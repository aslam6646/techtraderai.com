<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TechTrader AI - Integrated</title>
    <style>
        /* --- Base styles from original site (trimmed for readability) --- */
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Orbitron','Rajdhani',monospace,sans-serif;background:#000;color:#fff;overflow-x:hidden;cursor:none}
        .cursor{width:20px;height:20px;border:2px solid #00ffff;border-radius:50%;position:fixed;pointer-events:none;z-index:9999;transition:transform .15s ease;box-shadow:0 0 20px rgba(0,255,255,.6),inset 0 0 10px rgba(0,255,255,.3)}
        .cursor-dot{width:6px;height:6px;background:#00ffff;border-radius:50%;position:fixed;pointer-events:none;z-index:10000;box-shadow:0 0 15px rgba(0,255,255,.8)}
        .cursor.hover{transform:scale(1.8);background:rgba(0,255,255,.1)}
        .cursor-trail{width:4px;height:4px;background:#00ffff;border-radius:50%;position:fixed;pointer-events:none;z-index:9998;opacity:.6;box-shadow:0 0 10px rgba(0,255,255,.6)}
        .grid-bg{position:fixed;top:0;left:0;right:0;bottom:0;background-image:linear-gradient(rgba(0,255,255,.05) 1px, transparent 1px),linear-gradient(90deg, rgba(0,255,255,.05) 1px, transparent 1px);background-size:50px 50px;pointer-events:none;z-index:0}
        .scanlines{position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(transparent 50%, rgba(0,255,255,.02) 50%);background-size:100% 4px;pointer-events:none;z-index:1;animation:scan 8s linear infinite}
        @keyframes scan{0%{transform:translateY(0)}100%{transform:translateY(50px)}}
        .cyber-glow{position:fixed;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at center, rgba(0,255,255,.1) 0%,transparent 70%);pointer-events:none;z-index:0;animation:pulse 4s ease-in-out infinite}
        @keyframes pulse{0%,100%{opacity:.3}50%{opacity:.6}}
        .container{max-width:1400px;margin:0 auto;padding:0 40px;position:relative;z-index:2}
        nav{padding:20px 0;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(0,255,255,.2)}
        .logo{display:flex;align-items:center;gap:12px}
        .logo-img{width:45px;height:45px;filter:drop-shadow(0 0 15px rgba(0,255,255,.8))}
        .logo-text{font-size:20px;font-weight:900;color:#00ffff;text-shadow:0 0 20px rgba(0,255,255,.8),0 0 40px rgba(0,255,255,.4);letter-spacing:2px;display:flex;flex-direction:column;align-items:center;gap:3px}
        .logo-text-bottom{display:flex;align-items:center;gap:8px}
        .logo-subtitle{font-size:11px;color:rgba(0,255,255,.7);letter-spacing:3px;margin-top:-3px}
        .nav-links{display:flex;gap:40px;list-style:none}
        .nav-links a{color:#00ffff;text-decoration:none;font-weight:700;text-transform:uppercase;letter-spacing:2px;font-size:12px;position:relative;transition:all .3s}
        .nav-links a::after{content:'';position:absolute;bottom:-5px;left:0;width:0;height:2px;background:#00ffff;box-shadow:0 0 10px #00ffff;transition:width .3s}
        .nav-links a:hover::after{width:100%}
        .hero{min-height:90vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:100px 0;position:relative}
        .hero-content h1{font-size:clamp(48px,8vw,110px);font-weight:900;line-height:1.1;margin-bottom:30px;color:#fff;text-shadow:0 0 30px rgba(0,255,255,.8);letter-spacing:-2px}
        .cyber-text{color:#00ffff;text-shadow:0 0 20px rgba(0,255,255,1),0 0 40px rgba(0,255,255,.6),0 0 60px rgba(0,255,255,.4);animation:glitch 3s infinite}
        @keyframes glitch{0%,90%,100%{transform:translate(0)}92%{transform:translate(-2px,2px)}94%{transform:translate(2px,-2px)}96%{transform:translate(-2px,-2px)}}
        .hero-content p{font-size:22px;color:rgba(0,255,255,.8);max-width:700px;margin:0 auto 50px;line-height:1.8;text-transform:uppercase;letter-spacing:1px;font-weight:500}
        .cta-group{display:flex;gap:20px;justify-content:center;flex-wrap:wrap}
        .btn{padding:18px 45px;font-size:16px;font-weight:700;text-decoration:none;transition:all .3s;cursor:pointer;border:none;text-transform:uppercase;letter-spacing:2px;position:relative;overflow:hidden;display:inline-flex;align-items:center;justify-content:center}
        .btn-primary{background:rgba(0,255,255,.1);color:#00ffff;border:2px solid #00ffff;box-shadow:0 0 20px rgba(0,255,255,.4),inset 0 0 20px rgba(0,255,255,.1)}
        .btn-primary::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:rgba(0,255,255,.3);transition:left .4s}
        .btn-primary:hover::before{left:100%}
        .btn-primary:hover{box-shadow:0 0 40px rgba(0,255,255,.8),inset 0 0 30px rgba(0,255,255,.2)}
        .btn-secondary{background:transparent;color:#fff;border:2px solid rgba(255,255,255,.3)}
        .btn-secondary:hover{border-color:#00ffff;color:#00ffff;box-shadow:0 0 20px rgba(0,255,255,.4)}
        .tech-card{background:rgba(0,20,20,.6);border:2px solid rgba(0,255,255,.3);padding:60px;margin:100px 0;box-shadow:0 0 40px rgba(0,255,255,.2),inset 0 0 40px rgba(0,255,255,.05);position:relative;clip-path:polygon(0 0, calc(100% - 30px) 0, 100% 30px, 100% 100%, 30px 100%, 0 calc(100% - 30px))}
        .tech-card .cta-group{display:flex;justify-content:center}
        .tech-card::before{content:'';position:absolute;top:10px;right:10px;width:40px;height:40px;border-top:3px solid #00ffff;border-right:3px solid #00ffff}
        .tech-card::after{content:'';position:absolute;bottom:10px;left:10px;width:40px;height:40px;border-bottom:3px solid #00ffff;border-left:3px solid #00ffff}
        .services-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:30px;margin-top:60px}
        .service-card{background:rgba(0,20,20,.4);border:2px solid rgba(0,255,255,.3);padding:40px;transition:all .4s;cursor:pointer;position:relative;clip-path:polygon(20px 0,100% 0,100% calc(100% - 20px),calc(100% - 20px) 100%,0 100%,0 20px);display:flex;flex-direction:column;align-items:center;text-align:center}
        .service-card:hover{border-color:#00ffff;box-shadow:0 0 30px rgba(0,255,255,.6),inset 0 0 30px rgba(0,255,255,.1);transform:translateY(-5px)}
        .service-icon{width:70px;height:70px;background:rgba(0,255,255,.1);border:2px solid #00ffff;display:flex;align-items:center;justify-content:center;font-size:35px;margin-bottom:25px;box-shadow:0 0 20px rgba(0,255,255,.4),inset 0 0 20px rgba(0,255,255,.1);clip-path:polygon(10px 0,100% 0,100% calc(100% - 10px),calc(100% - 10px) 100%,0 100%,0 10px)}
        .service-card h3{font-size:24px;margin-bottom:15px;color:#00ffff;text-transform:uppercase;letter-spacing:2px}
        .service-card p{color:rgba(255,255,255,.7);line-height:1.8;font-size:15px;font-family:'Rajdhani',sans-serif}
        .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:40px;text-align:center;margin:100px 0}
        .stat-item{position:relative;padding:30px;background:rgba(0,20,20,.4);border:2px solid rgba(0,255,255,.3);clip-path:polygon(15px 0,100% 0,100% calc(100% - 15px),calc(100% - 15px) 100%,0 100%,0 15px)}
        .stat-item h2{font-size:64px;font-weight:900;color:#00ffff;text-shadow:0 0 30px rgba(0,255,255,.8);margin-bottom:10px}
        .section-title{font-size:clamp(36px,5vw,64px);font-weight:900;text-align:center;margin-bottom:20px;color:#00ffff;text-shadow:0 0 30px rgba(0,255,255,.6);text-transform:uppercase;letter-spacing:2px}
        footer{text-align:center;padding:60px 0;color:rgba(0,255,255,.6);border-top:2px solid rgba(0,255,255,.2);margin-top:100px;text-transform:uppercase;letter-spacing:2px;font-size:12px}
        .circuit-line{position:absolute;width:2px;height:100px;background:linear-gradient(180deg,transparent,#00ffff,transparent);animation:circuit-flow 3s linear infinite}
        @keyframes circuit-flow{0%{transform:translateY(-100px);opacity:0}50%{opacity:1}100%{transform:translateY(100px);opacity:0}}
        @media (max-width:768px){.container{padding:0 20px}nav{flex-direction:column;gap:15px;padding:15px 0}.logo{width:100%;justify-content:center}.nav-links{display:flex;gap:20px;font-size:11px}.hero-content h1{font-size:48px}.hero-content p{font-size:16px}.tech-card{padding:40px 30px}.cta-group{flex-direction:column;align-items:center}.btn{width:100%;max-width:300px}.services-grid{grid-template-columns:1fr}.stats{grid-template-columns:repeat(2,1fr);gap:20px;margin:60px 0}.stat-item{padding:20px}.stat-item h2{font-size:48px}.stat-item p{font-size:14px}.logo-text{font-size:18px}.logo-text-icon{width:40px;height:40px}.logo-text-bottom{gap:6px}}

        /* --- Popup/chat styles (adapted from provided popup) --- */
        /* Chat overlay */
        .chat-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.75);display:none;align-items:center;justify-content:center;z-index:20000;animation:fadeIn .25s ease}
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}
        .chat-container{width:90%;max-width:820px;height:80vh;max-height:760px;background:linear-gradient(135deg,#0f1419 0%, #0a0e14 100%);border:2px solid #00f3ff;position:relative;display:flex;flex-direction:column;animation:slideUp .45s cubic-bezier(.68,-.55,.265,1.55);box-shadow:0 0 60px rgba(0,243,255,.4),inset 0 0 30px rgba(0,243,255,.05);backdrop-filter:blur(10px);overflow:hidden}
        @keyframes slideUp{from{opacity:0;transform:translateY(100px) scale(.95) rotateX(10deg)}to{opacity:1;transform:translateY(0) scale(1) rotateX(0)}}
        .chat-header{padding:14px 18px;border-bottom:2px solid #00f3ff;display:flex;align-items:center;gap:12px;background:rgba(0,243,255,0.03)}
        .chat-title{font-size:1rem;letter-spacing:.12em;display:flex;align-items:center;gap:12px;color:#00f3ff;font-weight:700}
        .chat-title img{width:46px;height:46px;object-fit:contain;filter:drop-shadow(0 0 14px rgba(0,255,255,.8))}
        .status-dot{width:10px;height:10px;background:#00ff4d;border-radius:50%;box-shadow:0 0 10px rgba(0,255,0,.6);animation:onlinePulse 1.8s infinite}
        @keyframes onlinePulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.4);opacity:.5}100%{transform:scale(1);opacity:1}}
        .chat-header .title-text{display:flex;flex-direction:column;line-height:1;gap:2px}
        .chat-header .title-text .main{font-size:18px;font-weight:900;letter-spacing:.18em;color:#00f3ff}
        .chat-header .title-text .sub{font-size:11px;color:#b8fff2;text-transform:uppercase;opacity:.85}
        .close-btn{margin-left:auto;background:transparent;border:2px solid #00f3ff;color:#00f3ff;width:36px;height:36px;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:all .25s ease}
        .close-btn:hover{background:rgba(255,0,0,.12);border-color:#ff0040;color:#ff0040;transform:rotate(90deg)}

        .chat-messages{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:12px;background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.02) 100%)}
        .message{padding:12px 14px;border-radius:6px;max-width:80%;word-wrap:break-word;position:relative}
        .message.user{align-self:flex-end;background:linear-gradient(135deg, rgba(0,243,255,.12) 0%, rgba(0,243,255,.06) 100%);border:1px solid #00f3ff;border-left:4px solid #00f3ff;box-shadow:0 4px 15px rgba(0,243,255,.08)}
        .message.ai{align-self:flex-start;background:linear-gradient(135deg, rgba(0,255,100,.12) 0%, rgba(0,255,100,.05) 100%);border:1px solid #00ff64;border-left:4px solid #00ff64;}
        .message.system{align-self:center;background:linear-gradient(135deg, rgba(255,200,0,.12) 0%, rgba(255,200,0,.05) 100%);border:1px solid #ffc800;font-style:italic}

        .suggestions{display:flex;gap:10px;padding:12px 18px;flex-wrap:wrap;border-top:1px solid rgba(0,243,255,.06);background:rgba(0,243,255,.01)}
        .suggestion-chip{padding:8px 14px;border-radius:20px;background:rgba(0,243,255,.06);border:1px solid #00f3ff;color:#00f3ff;cursor:pointer}

        .chat-input-container{padding:14px;border-top:2px solid #00f3ff;display:flex;gap:10px;background:rgba(0,243,255,0.02)}
        .chat-input{flex:1;padding:12px;background:#0a0e14;border:2px solid #00f3ff;color:#00f3ff;font-family:'Courier New',monospace;font-size:.95rem;outline:none}
        .send-btn{padding:12px 22px;background:transparent;border:2px solid #00f3ff;color:#00f3ff;cursor:pointer}
        .voice-btn{padding:10px;background:transparent;border:2px solid #ff0080;color:#ff0080;cursor:pointer}

        .toast{position:fixed;bottom:30px;right:30px;padding:12px 18px;background:rgba(15,20,25,0.98);border:2px solid #00ff88;border-radius:4px;color:#00ff88;transform:translateX(400px);transition:transform .3s ease;z-index:30000}
        .toast.show{transform:translateX(0)}

        /* small responsive fixes */
        @media (max-width:600px){.chat-header img{width:38px;height:38px}.chat-header .title-text .main{font-size:15px}}
    </style>
</head>
<body>
    <div class="grid-bg"></div>
    <div class="scanlines"></div>
    <div class="cyber-glow"></div>
    <div class="cursor"></div>
    <div class="cursor-dot"></div>

    <div class="container">
        <nav>
            <div class="logo">
                <div>
                    <div class="logo-text">
                        <svg class="logo-text-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <filter id="glow">
                                    <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                    <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                                </filter>
                            </defs>
                            <circle cx="50" cy="50" r="45" fill="rgba(0, 255, 255, 0.15)" filter="url(#glow)"/>
                            <circle cx="50" cy="50" r="35" fill="rgba(0, 255, 255, 0.25)"/>
                            <circle cx="50" cy="50" r="25" fill="rgba(0, 255, 255, 0.35)"/>
                            <path d="M 30 50 L 45 50 M 55 50 L 70 50 M 50 30 L 50 45 M 50 55 L 50 70" stroke="#00ffff" stroke-width="3" stroke-linecap="round"/>
                            <circle cx="35" cy="35" r="4" fill="#00ffff"/><circle cx="65" cy="35" r="4" fill="#00ffff"/><circle cx="35" cy="65" r="4" fill="#00ffff"/><circle cx="65" cy="65" r="4" fill="#00ffff"/>
                            <circle cx="50" cy="50" r="8" fill="none" stroke="#00ffff" stroke-width="2"/>
                        </svg>
                        <div class="logo-text-bottom">
                            <span>TECHTRADER</span>
                            <span>AI</span>
                        </div>
                    </div>
                </div>
            </div>
            <ul class="nav-links">
                <li><a href="#services">SYSTEMS</a></li>
                <li><a href="#about">PROTOCOL</a></li>
                <li><a href="#contact">CONNECT</a></li>
            </ul>
        </nav>

        <section class="hero">
            <div class="hero-content">
                <h1>NEURAL AUTOMATION<br><span class="cyber-text">NEXT-GEN AI</span></h1>
                <p>Deploy advanced AI systems that operate autonomously. Precision-engineered intelligence for the digital age.</p>
                <div class="cta-group">
                    <!-- changed to button with id so we can trigger popup -->
                    <button id="initializeBtn" class="btn btn-primary">INITIALIZE</button>
                    <a href="#services" class="btn btn-secondary">EXPLORE TECH</a>
                </div>
            </div>
        </section>

        <div class="stats">
            <div class="stat-item"><h2>10X</h2><p>Speed Boost</p></div>
            <div class="stat-item"><h2>90%</h2><p>Cost Optimize</p></div>
            <div class="stat-item"><h2>24/7</h2><p>Active Runtime</p></div>
            <div class="stat-item"><h2>100+</h2><p>Systems Live</p></div>
        </div>

        <section id="services">
            <h2 class="section-title">CORE SYSTEMS</h2>
            <p class="section-subtitle">Military-grade automation protocols engineered for maximum efficiency</p>
            <div class="services-grid">
                <div class="service-card"><div class="service-icon">ü§ñ</div><h3>AI Neural Bots</h3><p>Advanced conversational AI modules...</p></div>
                <div class="service-card"><div class="service-icon">‚ö°</div><h3>Process Automation</h3><p>High-velocity workflow engines...</p></div>
                <div class="service-card"><div class="service-icon">üìä</div><h3>Data Intelligence</h3><p>Predictive analytics core...</p></div>
                <div class="service-card"><div class="service-icon">üéØ</div><h3>Lead Synthesis</h3><p>Autonomous prospecting networks...</p></div>
                <div class="service-card"><div class="service-icon">üìß</div><h3>Message Protocol</h3><p>Intelligent communication arrays...</p></div>
                <div class="service-card"><div class="service-icon">üîó</div><h3>System Integration</h3><p>Custom API frameworks...</p></div>
            </div>
        </section>

        <div class="tech-card">
            <h2 class="section-title">READY TO UPGRADE?</h2>
            <p class="section-subtitle">Deploy cutting-edge AI infrastructure that transforms your operations</p>
            <div class="cta-group">
                <!-- id added to trigger popup -->
                <button id="accessSystemBtn" class="btn btn-primary">ACCESS SYSTEM</button>
            </div>
        </div>

        <footer><p>¬© 2024 TECHTRADER AI ‚Ä¢ ALL SYSTEMS OPERATIONAL</p></footer>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- Integrated Chat Overlay / Popup -->
    <div class="chat-overlay" id="chatOverlay" aria-hidden="true">
        <div class="chat-container" role="dialog" aria-modal="true" aria-labelledby="chatTitle">
            <div class="chat-header">
                <img src="transparent.png" alt="TechTrader AI logo" />
                <div class="title-text">
                    <div class="main">TECHTRADER AI</div>
                    <div class="sub">AI SYSTEM ONLINE</div>
                </div>
                <div class="status-dot" title="Online"></div>
                <button class="close-btn" id="closeChatBtn" aria-label="Close chat">√ó</button>
            </div>

            <div class="quick-actions" style="display:flex;gap:8px;padding:10px 18px;border-bottom:1px solid rgba(0,243,255,0.06);background:rgba(0,243,255,0.02)">
                <button class="quick-action-btn" onclick="clearChat()" title="Clear Chat">üóëÔ∏è CLEAR</button>
                <button class="quick-action-btn" onclick="exportChat()" title="Export Chat">üíæ EXPORT</button>
                <button class="quick-action-btn" onclick="toggleTheme()" title="Toggle Theme">üé® THEME</button>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message system">Connection established. Neural automation systems initialized.</div>
                <div class="message ai">Welcome to TechTrader AI. I'm your advanced AI assistant. How may I assist you today?<span class="message-time" id="time-0"></span></div>
            </div>

            <div class="suggestions" id="suggestions">
                <div class="suggestion-chip" onclick="useSuggestion('Tell me about AI Neural Bots')">ü§ñ AI Neural Bots</div>
                <div class="suggestion-chip" onclick="useSuggestion('How does Process Automation work?')">‚ö° Process Automation</div>
                <div class="suggestion-chip" onclick="useSuggestion('Show me pricing options')">üí∞ Pricing</div>
            </div>

            <div class="typing-indicator" id="typingIndicator" style="display:none">
                <span></span><span></span><span></span>
            </div>

            <div class="char-count" id="charCount">0 / 500</div>

            <div class="chat-input-container">
                <button class="voice-btn" id="voiceBtn" onclick="toggleVoiceInput()" title="Voice Input">üé§</button>
                <input type="text" class="chat-input" id="chatInput" placeholder="Enter your message..." maxlength="500" onkeypress="handleKeyPress(event)" oninput="updateCharCount()" />
                <button class="send-btn" id="sendBtn" onclick="sendMessage()">SEND</button>
            </div>
        </div>
    </div>

    <script>
        // Cursor animation (from original)
        const cursor = document.querySelector('.cursor');
        const cursorDot = document.querySelector('.cursor-dot');
        let mouseX=0, mouseY=0, cursorX=0, cursorY=0, dotX=0, dotY=0;
        const trails=[]; const maxTrails=15;
        document.addEventListener('mousemove', (e)=>{
            mouseX=e.clientX; mouseY=e.clientY;
            const trail=document.createElement('div'); trail.className='cursor-trail';
            trail.style.left=mouseX+'px'; trail.style.top=mouseY+'px';
            document.body.appendChild(trail); trails.push(trail);
            if(trails.length>maxTrails){ const old=trails.shift(); old.remove(); }
            setTimeout(()=>{ trail.style.opacity='0'; trail.style.transform='scale(0)'; trail.style.transition='all .5s ease'; }, 50);
        });
        function animateCursor(){ cursorX+=(mouseX-cursorX)*0.15; cursorY+=(mouseY-cursorY)*0.15; dotX+=(mouseX-dotX)*0.25; dotY+=(mouseY-dotY)*0.25; cursor.style.left=cursorX-10+'px'; cursor.style.top=cursorY-10+'px'; cursorDot.style.left=dotX-3+'px'; cursorDot.style.top=dotY-3+'px'; requestAnimationFrame(animateCursor); }
        animateCursor();
        document.querySelectorAll('a, button, .service-card, .btn').forEach(el=>{ el.addEventListener('mouseenter', ()=>cursor.classList.add('hover')); el.addEventListener('mouseleave', ()=>cursor.classList.remove('hover')); });

        // Popup functionality
        const chatOverlay = document.getElementById('chatOverlay');
        const initializeBtn = document.getElementById('initializeBtn');
        const accessSystemBtn = document.getElementById('accessSystemBtn');
        const closeChatBtn = document.getElementById('closeChatBtn');
        const chatInput = document.getElementById('chatInput');
        const toast = document.getElementById('toast');
        const loadingIndicator = null;

        function openChat(){ chatOverlay.style.display='flex'; document.body.style.overflow='hidden'; chatInput.focus(); showToast('System access granted'); }
        function closeChat(){ chatOverlay.style.display='none'; document.body.style.overflow=''; showToast('System closed', 'success'); }
        initializeBtn.addEventListener('click', openChat);
        accessSystemBtn.addEventListener('click', openChat);
        closeChatBtn.addEventListener('click', closeChat);

        // Toast
        function showToast(message, type='success'){ toast.textContent=message; toast.style.borderColor = type==='success' ? '#00ff88' : '#ff0040'; toast.style.color = type==='success' ? '#00ff88' : '#ff0040'; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'), 2500); }

        // Simple chat helpers (local-only)
        let chatHistory=[]; let messageCount=1;
        function updateCharCount(){ const input=document.getElementById('chatInput'); document.getElementById('charCount').textContent = `${input.value.length} / 500`; if(input.value.length>450) document.getElementById('charCount').style.color='#ff0040'; else document.getElementById('charCount').style.color='#00bfcc'; }
        function useSuggestion(text){ chatInput.value=text; updateCharCount(); chatInput.focus(); }
        function handleKeyPress(e){ if(e.key==='Enter') sendMessage(); }
        function addMessage(text,type){ const container=document.getElementById('chatMessages'); const div=document.createElement('div'); div.className = 'message ' + type; div.textContent = text; if(type!=='system'){ const ts = document.createElement('span'); ts.className='message-time'; ts.textContent = new Date().toLocaleTimeString(); div.appendChild(ts); } container.appendChild(div); container.scrollTop = container.scrollHeight; messageCount++; }
        function clearChat(){ if(confirm('Clear all messages?')){ document.getElementById('chatMessages').innerHTML=''; addMessage('Chat cleared. Starting fresh session.','system'); chatHistory=[]; showToast('Chat cleared'); } }
        function exportChat(){ const messages = document.querySelectorAll('.message'); let txt='TechTrader AI Chat Export\n\n'; messages.forEach(m => { txt += m.textContent + '\n\n'; }); const blob = new Blob([txt], {type:'text/plain'}); const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download = `techtrader-chat-${Date.now()}.txt`; a.click(); URL.revokeObjectURL(url); showToast('Chat exported'); }

        // Voice (lightweight)
        let recognition = null; let isRecording=false;
        if('webkitSpeechRecognition' in window || 'SpeechRecognition' in window){ const SR = window.SpeechRecognition || window.webkitSpeechRecognition; recognition = new SR(); recognition.continuous=false; recognition.interimResults=false; recognition.lang='en-US'; recognition.onresult = e => { chatInput.value = e.results[0][0].transcript; updateCharCount(); isRecording=false; document.getElementById('voiceBtn').classList.remove('recording'); }; recognition.onerror = ()=>{ isRecording=false; document.getElementById('voiceBtn').classList.remove('recording'); showToast('Voice error','error'); }; }
        function toggleVoiceInput(){ if(!recognition){ showToast('Voice not supported','error'); return;} if(isRecording){ recognition.stop(); isRecording=false; document.getElementById('voiceBtn').classList.remove('recording'); } else { recognition.start(); isRecording=true; document.getElementById('voiceBtn').classList.add('recording'); } }

        async function sendMessage(){ const txt = chatInput.value.trim(); if(!txt) return; addMessage(txt,'user'); chatInput.value=''; updateCharCount(); // simulate AI response
            const typing = document.getElementById('typingIndicator'); typing.style.display='block';
            setTimeout(()=>{ typing.style.display='none'; addMessage('Processing...','ai'); }, 800);
        }

        // Accessibility: close on Escape
        document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ if(chatOverlay.style.display==='flex') closeChat(); } });

        // Prevent focus trap (allow tabbing)
    </script>
</body>
</html>
